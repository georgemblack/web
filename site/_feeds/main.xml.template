{{- define "mainFeed" -}}
{{- $root := . -}}
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>{{ .SiteMetadata.URL }}/feeds/main.xml</id>
  <title type="text">{{ .SiteMetadata.Name }}</title>
  <subtitle>George Black is a software engineer in Chicago, with a small home on the internet.</subtitle>
  <updated>{{ currentISOTimestap }}</updated>
  <author>
    <name>{{ .SiteMetadata.Name }}</name>
    <uri>{{ .SiteMetadata.URL }}</uri>
    <email>contact@georgeblack.me</email>
  </author>
  <link href="{{ .SiteMetadata.URL }}" rel="alternate" type="text/html" />
  <link href="{{ .SiteMetadata.URL }}/feeds/main.xml" rel="self" type="application/atom+xml" />
  <icon>/icons/atom-feed-icon.png</icon>
  <generator version="1.0">George's custom build engine 1.0</generator>
  <rights>Copyright Â© {{ currentYear }}, George Black</rights>
  {{- range .SiteData.Posts.Posts }}
  <entry>
    <id>{{ $root.SiteMetadata.URL }}/{{ . | getPostPath }}</id>
    <title>{{ .Metadata.Title }}</title>
    <published>{{ .Published.Seconds | secondsToISOTimestamp }}</published>
    <updated>{{ .Published.Seconds | secondsToISOTimestamp }}</updated>
    <link href="{{ $root.SiteMetadata.URL }}/{{ . | getPostPath }}" rel="alternate" type="text/html" title="{{ .Metadata.Title }}" />
    <content type="html" xml:base="{{ $root.SiteMetadata.URL }}/{{ . | getPostPath }}" xml:lang="en">
      {{ .Content | escapeHTML }}
    </content>
    <author>
      <name>{{ $root.SiteMetadata.Name }}</name>
    </author>
  </entry>
  {{- end }}
</feed>
{{ end }}
